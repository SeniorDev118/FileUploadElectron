{"version":3,"sources":["../../app/main/index.js"],"names":["isDevelopment","process","env","NODE_ENV","TrayWindow","require","TrayIcon","mainWindow","trayWindow","trayIcon","forceQuit","tray","undefined","installExtensions","installer","extensions","forceDownload","UPGRADE_EXTENSIONS","name","default","e","console","log","message","crashReporter","start","productName","companyName","submitURL","uploadToServer","app","on","platform","quit","BrowserWindow","frame","titleBarStyle","width","height","minWidth","minHeight","show","window","loadFile","path","resolve","join","__dirname","setMenu","webContents","once","hide","preventDefault","props","Menu","buildFromTemplate","label","click","inspectElement","x","y","popup","hideWindow","isVisible","showWindow","ipcMain"],"mappings":"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","file":"index.js","sourcesContent":["import path from 'path';\nimport { app, crashReporter, BrowserWindow, Menu, Tray, ipcMain } from 'electron';\n\nconst isDevelopment = process.env.NODE_ENV === 'development';\n\nconst TrayWindow  = require('../renderer/windows/Tray/TrayWindow');\nconst TrayIcon    = require('../renderer/windows/Tray/TrayIcon');\n\nlet mainWindow = null;\nlet trayWindow = null;\nlet trayIcon = null;\n\nlet forceQuit = false;\nlet tray = undefined;\n\n\nconst installExtensions = async () => {\n  const installer = require('electron-devtools-installer');\n  const extensions = ['REACT_DEVELOPER_TOOLS', 'REDUX_DEVTOOLS'];\n  const forceDownload = !!process.env.UPGRADE_EXTENSIONS;\n  for (const name of extensions) {\n    try {\n      await installer.default(installer[name], forceDownload);\n    } catch (e) {\n      console.log(`Error installing ${name} extension: ${e.message}`);\n    }\n  }\n};\n\ncrashReporter.start({\n  productName: 'Electron Alchemy',\n  companyName: 'Electron Co',\n  submitURL: 'https://your-domain.com/url-to-submit',\n  uploadToServer: false,\n});\n\napp.on('window-all-closed', () => {\n  // On OS X it is common for applications and their menu bar\n  // to stay active until the user quits explicitly with Cmd + Q\n  if (process.platform !== 'darwin') {\n    app.quit();\n  }\n\n});\n\napp.on('ready', async () => {\n  if (isDevelopment) {\n    await installExtensions();\n  }\n\n  //createTray();\n\n  // var remote = require('electron').remote;     \n  // remote.getGlobal('Global_Var').API_URL = \"https://api.alchemy.is\";     \n\n  mainWindow = new BrowserWindow({\n    frame: false,\n    titleBarStyle: 'hidden',\n    width: 372,\n    height: 538,\n    minWidth: 372,\n    minHeight: 538,\n    // maxWidth: 372,\n    // maxHeight: 538,\n    show: true\n  });\n\n  trayWindow = new TrayWindow();\n  trayIcon = new TrayIcon(trayWindow.window, mainWindow);\n\n  mainWindow.loadFile(path.resolve(path.join(__dirname, '../renderer/index.html')));\n  mainWindow.setMenu(null);\n\n  // show window once on first load\n  mainWindow.webContents.once('did-finish-load', () => {\n    mainWindow.show();\n  });\n\n  mainWindow.on('blur', () => {\n    mainWindow.hide();\n  });\n\n  mainWindow.webContents.on('did-finish-load', () => {\n    // Handle window logic properly on macOS:\n    // 1. App should not terminate if window has been closed\n    // 2. Click on icon in dock should re-open the window\n    // 3. âŒ˜+Q should close the window and quit the app\n    if (process.platform === 'darwin') {\n      mainWindow.on('close', function (e) {\n        if (!forceQuit) {\n          e.preventDefault();\n          mainWindow.hide();\n        }\n      });\n\n      app.on('activate', () => {\n        mainWindow.show();\n      });\n\n      app.on('before-quit', () => {\n        forceQuit = true;\n      });\n    } else {\n\n      mainWindow.on('closed', () => {\n        mainWindow = null;\n      });\n    }\n\n  });\n\n  if (isDevelopment) {\n    // auto-open dev tools\n    //mainWindow.webContents.openDevTools();\n\n    // add inspect element on right click menu\n    mainWindow.webContents.on('context-menu', (e, props) => {\n      Menu.buildFromTemplate([\n        {\n          label: 'Inspect element',\n          click() {\n            mainWindow.inspectElement(props.x, props.y);\n          },\n        },\n      ]).popup(mainWindow);\n    });\n  }\n\n  const hideWindow = () => {\n    if(mainWindow!=null) {\n      if(mainWindow.isVisible()) {\n        mainWindow.hide();\n        //***** mac *****\n        // app.dock.hide();\n      }\n    }\n  } \n\n  const showWindow = () => {\n    if(mainWindow!=null) {\n      if(!mainWindow.isVisible()) {\n        mainWindow.show();\n        // ***** mac *****\n        // app.dock.show();\n        // ***** windwos *****\n      }\n    }\n  }\n  ipcMain.on('show-window', () => {\n    showWindow()\n  })\n\n  ipcMain.on('hide-window', () => {\n    hideWindow()\n  })\n\n  ipcMain.on('signout-window', () => {\n    trayWindow.window.hide()\n  })\n\n  ipcMain.on('quit-app', function() {\n    app.quit();\n  });\n});\n"]}