{"version":3,"sources":["../../../../app/renderer/shared/utils/LocalStorageRepository.js"],"names":["getRequest","resource","resolve","JSON","parse","localStorage","getItem","find","id","then","items","item","postRequest","data","createData","push","setItem","batchCreate","forEach","deleteRequest","newData","filter","update"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAEO,MAAMA,kCAAaC,YACxB,sBAAYC,WACVA,QAAQC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqBL,QAArB,CAAX,KAA8C,EAAtD,CADF,CADK;;AAKA,MAAMM,sBAAO,CAACN,QAAD,EAAWO,EAAX,KAClBR,WAAWC,QAAX,EAAqBQ,IAArB,CACEC,SAAS,sBAAYR,WAAWA,QAAQQ,MAAMH,IAAN,CAAWI,QAAQA,KAAKH,EAAL,KAAYA,EAA/B,CAAR,CAAvB,CADX,CADK;;AAKA,MAAMI,oCAAc,CAACX,QAAD,EAAWY,IAAX,KACzBb,WAAWC,QAAX,EAAqBQ,IAArB,CAA2BC,KAAD,IAAW;AACnC,MAAII,wCAAkBD,IAAlB,CAAJ;;AAEA,MAAI,CAACC,WAAWN,EAAhB,EAAoB;AAClBM,4CAAkBA,UAAlB,IAA8BN,IAAI,kBAAlC;AACD;;AAEDE,QAAMK,IAAN,CAAWD,UAAX;AACA,SAAO,sBAAYZ,WACjBA,QAAQG,aAAaW,OAAb,CAAqBf,QAArB,EAA+B,yBAAeS,KAAf,CAA/B,CAAR,CADK,CAAP;AAGD,CAXD,CADK;;AAcA,MAAMO,oCAAc,CAAChB,QAAD,EAAWY,IAAX,KAAoB;AAC7C,QAAMH,QAAQ,EAAd;AACAG,OAAKK,OAAL,CAAaP,QAAQD,MAAMK,IAAN,CAAW,sBAAc,EAAd,EAAkBJ,IAAlB,EAAwB,EAAEH,IAAI,kBAAN,EAAxB,CAAX,CAArB;AACA,SAAO,sBAAYN,WACjBA,QAAQG,aAAaW,OAAb,CAAqBf,QAArB,EAA+B,yBAAeS,KAAf,CAA/B,CAAR,CADK,CAAP;AAGD,CANM;;AAQA,MAAMS,wCAAgB,CAAClB,QAAD,EAAWO,EAAX,KAC3BR,WAAWC,QAAX,EAAqBQ,IAArB,CAA2BC,KAAD,IAAW;AACnC,QAAMU,UAAUV,MAAMW,MAAN,CAAaV,QAAQA,KAAKH,EAAL,KAAYA,EAAjC,CAAhB;AACA,SAAO,sBAAYN,WACjBA,QAAQG,aAAaW,OAAb,CAAqBf,QAArB,EAA+B,yBAAemB,OAAf,CAA/B,CAAR,CADK,CAAP;AAGD,CALD,CADK;;AAQA,MAAME,0BAAS,CAACrB,QAAD,EAAWO,EAAX,EAAeK,IAAf,KACpBN,KAAKN,QAAL,EAAeO,EAAf,EAAmBC,IAAnB,CAAyBE,IAAD,IAAU;AAChC,QAAMS,UAAU,sBAAc,EAAd,EAAkBT,IAAlB,EAAwBE,IAAxB,CAAhB;AACA,SAAOM,cAAclB,QAAd,EAAwBO,EAAxB,EAA4BC,IAA5B,CAAiC,MAAMG,YAAYX,QAAZ,EAAsBmB,OAAtB,CAAvC,CAAP;AACD,CAHD,CADK","file":"LocalStorageRepository.js","sourcesContent":["import uuidv1 from 'uuid/v1'\n\nexport const getRequest = resource =>\n  new Promise(resolve =>\n    resolve(JSON.parse(localStorage.getItem(resource)) || [])\n  )\n\nexport const find = (resource, id) =>\n  getRequest(resource).then(\n    items => new Promise(resolve => resolve(items.find(item => item.id === id)))\n  )\n\nexport const postRequest = (resource, data) =>\n  getRequest(resource).then((items) => {\n    let createData = { ...data }\n\n    if (!createData.id) {\n      createData = { ...createData, id: uuidv1() }\n    }\n\n    items.push(createData)\n    return new Promise(resolve =>\n      resolve(localStorage.setItem(resource, JSON.stringify(items)))\n    )\n  })\n\nexport const batchCreate = (resource, data) => {\n  const items = []\n  data.forEach(item => items.push(Object.assign({}, item, { id: uuidv1() })))\n  return new Promise(resolve =>\n    resolve(localStorage.setItem(resource, JSON.stringify(items)))\n  )\n}\n\nexport const deleteRequest = (resource, id) =>\n  getRequest(resource).then((items) => {\n    const newData = items.filter(item => item.id !== id)\n    return new Promise(resolve =>\n      resolve(localStorage.setItem(resource, JSON.stringify(newData)))\n    )\n  })\n\nexport const update = (resource, id, data) =>\n  find(resource, id).then((item) => {\n    const newData = Object.assign({}, item, data)\n    return deleteRequest(resource, id).then(() => postRequest(resource, newData))\n  })\n"]}