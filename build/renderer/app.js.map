{"version":3,"sources":["../../app/renderer/app.js"],"names":["Menu","Tray","require","remote","tray","App","Component","createTray","clearInterval","timer","trayHideWindow","isAuto","console","log","ipcRenderer","send","menu","buildFromTemplate","label","click","item","window","event","trayShowWindow","props","logout","role","setContextMenu","componentDidMount","global","firstApp","path","join","__dirname","componentWillUnmount","componentDidUpdate","prevProps","pathname","render","assets","propTypes","PropTypes","func","isRequired","mapDispatchToProps","dispatch","url","mapStateToProps","state","router","location","userId","auth","user"],"mappings":"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","file":"app.js","sourcesContent":["import React, { Component } from 'react'\nimport Container from './shared/components/Grid/Container'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types';\nimport { push, replace } from 'react-router-redux';\nimport { Authenticated } from './components/Auth/index'\nimport withPrompt from './shared/utils/withPrompt'\nimport Welcome from './components/Home/components/Welcome'\nimport path from 'path';\n\nvar { Menu, Tray } = require('electron').remote\nlet tray = null;\nclass App extends Component {\n\n  createTray = () => {\n    clearInterval(this.timer);\n    this.timer = null;\n    this.trayHideWindow(false);\n  }\n  \n  trayHideWindow = (isAuto) => {\n    console.log('trayHideWindow');\n    const { ipcRenderer } = require('electron')\n    ipcRenderer.send('hide-window', 'an-argument');\n    const menu = Menu.buildFromTemplate([\n      {\n        label: \"Show Window\", click: (item, window, event) => {\n          this.trayShowWindow();          \n        }\n      },\n      {\n        label: \"Sign out\", click: (item, window, event) => {\n          this.props.logout()\n        }\n      },\n      { role: \"quit\" }, // \"role\": system prepared action menu\n    ]);\n    tray.setContextMenu(menu);\n  }\n\n  trayShowWindow = () => {\n     \n    const { ipcRenderer } = require('electron')\n    ipcRenderer.send('show-window', 'an-argument');\n    const menu = Menu.buildFromTemplate([\n      {\n        label: \"Hide Window\", click: (item, window, event) => {\n          this.trayHideWindow(false);\n        }\n      },\n      {\n        label: \"Sign out\", click: (item, window, event) => {\n          this.props.logout()\n        }\n      },\n      { role: \"quit\" }, // \"role\": system prepared action menu\n    ]); \n    tray.setContextMenu(menu);\n  }\n\n  componentDidMount = () => {\n    if (global.firstApp==true) {\n      tray = new Tray(path.join(__dirname, './public/images/flask.png'))\n      // this.timer = setInterval(this.createTray, 3000);\n      global.firstApp = false;\n    }\n  }\n\n  componentWillUnmount = () => {\n    if(this.timer!=null) {\n      clearInterval(this.timer);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { pathname } = this.props\n  }\n\n  render() {\n    const { pathname, assets } = this.props\n\n    return (\n      <Authenticated>\n        <Container>\n          <Welcome pathname={pathname} onMinimize={this.trayHideWindow}></Welcome>\n        </Container>\n      </Authenticated >\n    )\n  }\n}\n\nApp.propTypes = {\n  logout: PropTypes.func.isRequired,\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    logout: (url) => {\n      const { ipcRenderer } = require('electron')\n      ipcRenderer.send('open-main-window', 'an-argument');\n      dispatch(push('/logout'));\n\n      const menu = Menu.buildFromTemplate([\n        { role: \"quit\" }, // \"role\": system prepared action menu\n      ]);\n      tray.setContextMenu(menu);\n    }\n  };\n};\n\nconst mapStateToProps = state => ({\n  pathname: state.router.location.pathname,\n  userId: state.auth.user.url\n})\n\nexport default connect(null, mapDispatchToProps)(withPrompt(App))\n"]}